<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>JavaScriptIoT - SmartCar</title><link rel="stylesheet" href="./style.css" type="text/css"></head><body><div class="style-card"></div><div id="system" class="elementToFadeInAndOut"><ul><li>裝置名稱<div title="點擊更新裝置名稱" id="device" onclick="let name = prompt('輸入裝置名稱: '); name === null ? null:editDeviceName(name);">----</div></li><li>WiFi<div><button title="點擊開啟wifi功能選單" id="wifi" class="btn-system" onclick="showWifi()">----</button></div></li><li>訊號強度<button title="點擊更新裝置wifi名稱與密碼" class="btn-system" type="button" onclick="editSSID()">SSID修改</button><div title="SAP mode 表示未連接任何外部網路，<-xx>則表示連上外部網路的訊號強度" id="RSSI">----</div></li><li>啟動時間<div title="裝置已開機時間(若reset則從1開始)" id="LT">----</div></li><li>UART bps<div title="點擊更新裝置 UART baud" id="bps" onclick="let v = prompt('輸入Baud: '); v === null ? null:editBaud(v);">----</div></li><div class="version">v1.5.0</div></ul></div><div class="web-table elementToFadeInAndOut"><table><caption>數據表 <button class="btn-system" onclick="swWebpage()">控制介面</button></caption><thead><th>名稱</th><th>值</th></thead><tbody id="table-data"><tr><td>方向</td><td id="dir"></td></tr><tr><td>速度</td><td id="speed"></td></tr><tr><td>超音波(前)</td><td id="pingF"></td></tr><tr><td>超音波(後)</td><td id="pingB"></td></tr><tr><td>超音波(左)</td><td id="pingL"></td></tr><tr><td>超音波(右)</td><td id="pingR"></td></tr><tr><td>顏色(前)</td><td id="colorF"></td></tr><tr><td>顏色(後)</td><td id="colorB"></td></tr><tr><td>顏色(左)</td><td id="colorL"></td></tr><tr><td>顏色(右)</td><td id="colorR"></td></tr></tbody></table></div><div id="loop"><div class="code-block"><div id="loop-edit" class="zoom-block"><h2>程式編輯區</h2><div class="other-block"><div class="btn-import"><label for="upload">匯入 <input type="file" id="upload" accept=".json" onchange="ImportConfig()"></label></div><div><a id="export" onclick="ExportConfig()"><button class="btn-system">匯出</button></a></div><button class="btn-system" onclick="swTerminal()">終端</button></div><div><button title="點擊切換編輯模式" id="loop-code" style="font-size: 16px;" onclick="swCodeStyle()">方塊程式</button> <button title="開啟/關閉 方塊物件欄" id="loop-swBlock" style="font-size: 16px; display: none;" onclick="swBlocks()">顯示方塊</button> <button title="開啟/關閉 方塊轉換js預覽視窗" id="loop-codeView" style="font-size: 16px; display: none;" onclick="swCodeView()">方塊js預覽</button> <button title="點擊縮放程式區塊" id="loop-zoom" style="font-size: 16px;" onclick="Zoom()">展開</button></div><div class="select-block"><select id="loop-selectCode" class="select" style="background-color: #cdffee;" onchange="if(this.options.selectedIndex) {loop_select_code(this.options.selectedIndex);}"></select> <select id="block-selectCode" class="select" style="background-color: #cdffee; display: none;" onchange="if(this.options.selectedIndex) {block_select_code(this.options.selectedIndex);}"></select> <select title="在編輯區塊中加入常用JS程式碼" id="loop-addCode" class="select" onchange="if(this.options.selectedIndex) {loop_select_add(this.options.selectedIndex);this.selectedIndex=0}"><option selected="true" disabled="新增JS程式碼" label="新增JS程式碼"></option><option label="新增delay"></option><option label="新增console.log"></option><option label="新增if判斷"></option><option label="新增迴圈"></option></select></div><div class="cmd-block noselect"><button title="執行區塊中程式，未設定delay下，每100ms執行一次程式" class="btn-exec" onclick="newLoop()">執行</button> <button title="停止程式執行" class="btn-danger" onclick="StopLoop()">停止</button> <button title="清除輸出訊息" class="btn-warning" onclick="clearLog(1)">清除訊息</button> <button title="清除程式區塊與輸出訊息" class="btn-danger" onclick="clearAll(1)">清除全部</button></div><div id="loop-block-area" class="elementToFadeInAndOut"><div id="drag-drop-containers"><div id="target-containers"></div></div></div><textarea id="loop-codeView-result" cols="50" rows="5" disabled="disabled" class="elementToFadeInAndOut" style="display: none;"></textarea> <textarea id="loop-tx" cols="50" rows="10" class="elementToFadeInAndOut"></textarea> <textarea id="loop-result" cols="50" rows="5" disabled="disabled" class="elementToFadeInAndOut"></textarea></div></div></div><div title="匯入.json程式記錄檔" id="open-upload" class="side-bar elementToFadeInAndOut"><label for="upload" class="btn-open">匯入 <input type="file" id="upload" accept=".json" onchange="ImportConfig()"></label></div><div title="匯出.json程式記錄檔" id="open-export" class="side-bar elementToFadeInAndOut"><a id="export" onclick="ExportConfig()"><button class="btn-open">匯出</button></a></div><div title="開啟/關閉 自走車控制介面" id="open-web" class="side-bar elementToFadeInAndOut"><button class="btn-open" onclick="swWebpage()">控制</button></div><div title="開啟/關閉 系統資訊" id="open-sys" class="side-bar elementToFadeInAndOut"><button class="btn-open" onclick="swSystem()">系統</button></div><div title="開啟/關閉 終端功能" id="open-term" class="side-bar elementToFadeInAndOut"><button class="btn-open" onclick="swTerminal()">終端</button></div><div title="開啟/關閉 選單功能" id="side-menu" class="side-bar elementToFadeInAndOut"><button class="btn-open" onclick="swMenuBar()">選單</button></div><div id="terminal" class="elementToFadeInAndOut"><button class="btn-close" onclick="swTerminal()">X</button><h2>終端畫面 <button class="btn-system" style="display: none;" onclick="openHelp()">?</button></h2><textarea id="tx" cols="50" rows="10" disabled="disabled"></textarea><div>命令<input type="text" id="WSSCMD" autocomplete="off"><button class="btn-system" onclick='execCmd("WSSCMD")'>傳送</button> <button class="btn-system" onclick="clearMsg()">清除</button><!-- <button id="btn-speech" onclick="startSpeech()">語音控制</button>
            <button onclick="clearAllTimeouts()">停止</button> --></div></div><!-- Drag & Drop Block Program --><div id="index-source-container" class="elementToFadeInAndOut"><table><tr><td title="取得裝置所回傳的資料，等同於變數" id="index-data" draggable="true" class="data-index">資料</td><td title="點擊可後可輸入任意變數、數值與運算" id="index-val" draggable="true" class="val-index">值</td><td title="點擊可定義變數名稱" id="index-var" draggable="true" class="var-index">變數</td><td title="布林函式" id="index-op" draggable="true" class="op-index">邏輯</td><td title="比較兩數結果" id="index-bool" draggable="true" class="bool-index">判斷</td></tr><tr><td title="依據判斷結果執行程式" id="index-if" draggable="true" class="if-index">如果</td><td title="將值設定給變數，點擊後可設定為全域或區域變數，預設為全域" id="index-setV" draggable="true" class="setV-index">設定</td><td title="控制輸入、發送命令等功能" id="index-control" draggable="true" class="control-index">控制</td><td title="輸出訊息於下方欄位" id="index-log" draggable="true" class="log-index">顯示</td><td title="執行下一行程式碼所等待時間" id="index-delay" draggable="true" class="delay-index">等待</td></tr></table></div><div id="trash-container" data-role="drag-drop-container" class="trash trash-left elementToFadeInAndOut">垃圾桶</div><div id="trash-container2" data-role="drag-drop-container" class="trash trash-right elementToFadeInAndOut">垃圾桶</div><div id="drag-drop-source"><div id="source-container" data-role="drag-drop-container" class="container" style="display: none;"><div id="drag-source-if" draggable="true" class="if-block basic-style"><div class="if-blcok block-style">如果<div data-role="drag-drop-container" class="bool-block-area" data-index="1">判斷</div></div></div><div id="drag-source-data" draggable="true" class="data-block basic-style"><select data-type="select" select-index="0" onclick="this.setAttribute('select-index',this.selectedIndex); storeBlock();"></select></div><div id="drag-source-val" draggable="true" class="val-block basic-style"><div class="val-block block-style" onclick="let t =prompt('輸入值 (^˵◕ω◕˵^) :',this.innerText); t.length < 1
                ? alert('格式錯誤，長度至少爲1，不可爲空白 ( ꒪Д꒪)ノ')
                : (this.innerText = t); storeBlock();">值</div></div><div id="drag-source-var" draggable="true" class="var-block basic-style"><div class="var-block block-style" onclick="let t =prompt('輸入變數名稱 (^˵◕ω◕˵^) :',this.innerText); t.length < 1 || t.match(/\s|\W|^[0-9]/)? alert('格式錯誤，長度至少爲1，不可爲空白 ( ꒪Д꒪)ノ'):this.innerHTML = t; storeBlock();">變數</div></div><div id="drag-source-op" draggable="true" class="op-block basic-style"><select data-type="select" select-index="0" onclick="this.setAttribute('select-index',this.selectedIndex); storeBlock();"><option value="<" label="<"></option><option value=">" label=">"></option><option value="==" label="="></option><option value="!=" label="≠"></option><option value="<=" label="≤"></option><option value=">=" label="≥"></option><option value="&&" label="且"></option><option value="||" label="或"></option></select></div><div id="drag-source-log" draggable="true" class="log-block basic-style"><div class="log-block block-style">顯示<div data-role="drag-drop-container" class="v-block-area">變數|值</div></div></div><div id="drag-source-control" draggable="true" class="control-block basic-style"><div class="control-block block-style">控制 <select data-type="select" select-index="0" onclick="this.setAttribute('select-index',this.selectedIndex); storeBlock();"><option label="停止" value="move_stop"></option><option label="向前" value="move_forward"></option><option label="向後" value="move_backward"></option><option label="向左" value="move_left"></option><option label="向右" value="move_right"></option><option label="左前" value="move_Lforward"></option><option label="右前" value="move_Rforward"></option><option label="左後" value="move_Lbackward"></option><option label="右後" value="move_Rbackward"></option><option label="逆轉" value="move_Lturn"></option><option label="順轉" value="move_Rturn"></option><option label="顏色感測(前)" value="colorF"></option><option label="顏色感測(後)" value="colorB"></option><option label="顏色感測(左)" value="colorL"></option><option label="顏色感測(右)" value="colorR"></option><option label="LED顏色" value="led_color"></option><option label="LED亮度" value="led_bright"></option><option label="遠端馬達(1)" value="remote_servo[0]"></option><option label="遠端馬達(2)" value="remote_servo[1]"></option><option label="遠端馬達(3)" value="remote_servo[2]"></option><option label="遠端馬達(4)" value="remote_servo[3]"></option><option label="遠端馬達(5)" value="remote_servo[4]"></option><option label="遠端馬達(6)" value="remote_servo[5]"></option><option label="遠端馬達(7)" value="remote_servo[6]"></option><option label="遠端馬達(8)" value="remote_servo[7]"></option><option label="遠端PWM(1)" value="remote_pwm[0]"></option><option label="遠端PWM(2)" value="remote_pwm[1]"></option><option label="遠端PWM(3)" value="remote_pwm[2]"></option><option label="遠端PWM(4)" value="remote_pwm[3]"></option><option label="遠端PWM(5)" value="remote_pwm[4]"></option><option label="遠端PWM(6)" value="remote_pwm[5]"></option><option label="遠端PWM(7)" value="remote_pwm[6]"></option><option label="遠端PWM(8)" value="remote_pwm[7]"></option><option label="遠端命令" value="remote_cmd"></option></select> 參數:<div data-role="drag-drop-container" class="v-block-area">變數|值</div></div></div><div id="drag-source-delay" draggable="true" class="delay-block basic-style"><div class="delay-block block-style">等待 <input type="number" min="300" max="100000" step="100" value="300" data-type="input" oninput="this.setAttribute('value',this.value); storeBlock();"> 毫秒</div></div><div id="drag-source-setV" draggable="true" class="setV-block basic-style"><div class="setV-block block-style" onclick="updateVar(this)">設定<div style="color: rgb(0, 255, 149);">全域</div><div data-role="drag-drop-container" class="var-block-area">變數</div>為<div data-role="drag-drop-container" class="v-block-area">變數|值</div></div></div><div id="drag-source-bool" draggable="true" class="bool-block basic-style"><div class="bool-block block-style"><div data-role="drag-drop-container" class="v-block-area">變數|值</div><div><select data-type="select" select-index="0" onclick="this.setAttribute('select-index',this.selectedIndex); storeBlock();"><option value="<" label="<"></option><option value=">" label=">"></option><option value="==" label="="></option><option value="!=" label="≠"></option><option value="<=" label="≤"></option><option value=">=" label="≥"></option><option value="&&" label="且"></option><option value="||" label="或"></option></select></div><div data-role="drag-drop-container" class="v-block-area">變數|值</div></div></div></div></div><div id="web"><button class="btn-close" onclick="swWebpage()">X</button><div class="web-container noselect elementToFadeInAndOut"><div class="web-car-sensor"><table id="web-car-sensor"><caption>顏色感測</caption><tr><td style="background-color: #ffffff50;"><div class="arrow upL"></div></td><td id="color-forward"><div class="arrow up"></div></td><td style="background-color: #ffffff50;"><div class="arrow upR"></div></td></tr><tr><td id="color-left"><div class="arrow left"></div></td><td style="background-color: #ffffff50;"><div></div></td><td id="color-right"><div class="arrow right"></div></td></tr><tr><td style="background-color: #ffffff50;"><div class="arrow downL"></div></td><td id="color-backward"><div class="arrow down"></div></td><td style="background-color: #ffffff50;"><div class="arrow downR"></div></td></tr></table></div><div class="web-car-panel"><div>自走車控制</div><div>速度<input type="number" id="move-sp" min="30" max="200" value="30"></div><button class="btn-roll" id="move-Lturn">&#10226;</button> <button class="btn-roll" id="move-Rturn">&#10227;</button><table><tr><td id="move-forward-L"><div class="arrow upL"></div></td><td id="move-forward"><div class="arrow up"></div></td><td id="move-forward-R"><div class="arrow upR"></div></td></tr><tr><td id="move-left"><div class="arrow left"></div></td><td class="circle" id="move-stop"></td><td id="move-right"><div class="arrow right"></div></td></tr><tr><td id="move-backward-L"><div class="arrow downL"></div></td><td id="move-backward"><div class="arrow down"></div></td><td id="move-backward-R"><div class="arrow downR"></div></td></tr></table></div></div></div><div id="mask-wifi" class="mask" onclick="closeWifi()"></div><div id="mask-help" class="mask" onclick="closeHelp()"></div><!-- WIFI頁面 --><div id="wifi-content" class="float-content elementToFadeInAndOut"><h2>已連上 Wifi</h2><div id="wifi-now"></div><div id="wifi-list"><h2>搜尋中 Wifi</h2><div><button title="點擊搜尋可用wifi" id="wifi-refresh" class="w-scan" onclick="scanWifi()">搜尋</button> <button title="點擊重新連接最後一次連上的wifi" id="wifi-mode" class="w-scan">重新連接</button> <button title="點擊設定遠端裝置IP位址" id="wifi-remote" class="w-ip" onclick="let ip = prompt('輸入遠端裝置IP位址: '); ip === null ? null:editRemoteAddr(ip)">遠端IP 未設定</button> <button title="點擊更新已設定的遠端IP" class="w-ip-refresh" onclick="getRemoteAddr()">更新IP</button> <button title="點擊更新此裝置的區網IP" id="wifi-local" class="w-ip" onclick="getLocalIP()">區網IP 未更新</button></div><ul id="wifi-result"></ul></div></div></body><script>var js = ["app.js", "block.js"];
    document.addEventListener("DOMContentLoaded", function (event) {
        setTimeout(addScript, 1000);
        setTimeout(addScript, 2000);

    });

    function addScript() {
        script = document.createElement("script");
        script.type = "text/javascript";
        script.async = true;
        // script.onload = function () {
        //     console.log("Added Script");
        // };
        script.src = `./${js.shift()}`;
        document.getElementsByTagName("head")[0].appendChild(script);
    }</script></html>